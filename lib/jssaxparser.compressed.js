

(function(){function _implements(obj,arr){for(var i=0;i<arr.length;i++){if(typeof obj[arr[i]]!=="function"){return false}}return true}function XMLFilterImpl(parent){if(parent){if(!_implements(parent,["getContentHandler","getDTDHandler","getEntityResolver","getErrorHandler","getFeature","getProperty","parse","setContentHandler","setDTDHandler","setEntityResolver","setErrorHandler","setFeature","setProperty"])){throw"XMLFilterImpl must be given a parent which implements XMLReader"}this.parent=parent}}XMLFilterImpl.prototype.toString=function(){return"XMLFilterImpl"};XMLFilterImpl.prototype.setParent=function(parent){this.parent=parent};XMLFilterImpl.prototype
.getParent=function(){return this.parent};XMLFilterImpl.prototype.getContentHandler=function(){return this.parent.getContentHandler.call(this.parent)};XMLFilterImpl.prototype.getDTDHandler=function(){return this.parent.getDTDHandler.call(this.parent)};XMLFilterImpl.prototype.getEntityResolver=function(){return this.parent.getEntityResolver.call(this.parent)};XMLFilterImpl.prototype.getErrorHandler=function(){return this.parent.getErrorHandler.call(this.parent)};XMLFilterImpl.prototype.getFeature=function(name){return this.parent.getFeature.call(this.parent,name)};XMLFilterImpl.prototype.getProperty=function(name){return this.parent.getProperty.call(this.parent,name)};XMLFilterImpl.prototype.parse=function(inputOrSystemId){return this.parent.parse.call(this.parent,inputOrSystemId)};XMLFilterImpl.prototype.setContentHandler=function(handler){return this.parent.setContentHandler.call(this.parent,handler)};XMLFilterImpl.prototype.setDTDHandler=function(handler){return this.parent.setDTDHa
ndler.call(this.parent,handler)};XMLFilterImpl.prototype.setEntityResolver=function(resolver){return this.parent.setEntityResolver.call(this.parent,resolver)};XMLFilterImpl.prototype.setErrorHandler=function(handler){return this.parent.setErrorHandler.call(this.parent,handler)};XMLFilterImpl.prototype.setFeature=function(name,value){return this.parent.setFeature.call(this.parent,name,value)};XMLFilterImpl.prototype.setProperty=function(name,value){return this.parent.setProperty.call(this.parent,name,value)};XMLFilterImpl.prototype.startDocument=function(){return this.parent?this.parent.contentHandler.startDocument.call(this.parent.contentHandler):undefined};XMLFilterImpl.prototype.startElement=function(namespaceURI,localName,qName,atts){return this.parent?this.parent.contentHandler.startElement.call(this.parent.contentHandler,namespaceURI,localName,qName,atts):undefined};XMLFilterImpl.prototype.endElement=function(namespaceURI,localName,qName){return this.parent?this.parent.contentHan
dler.endElement.call(this.parent.contentHandler,namespaceURI,localName,qName):undefined};XMLFilterImpl.prototype.startPrefixMapping=function(prefix,uri){return this.parent?this.parent.contentHandler.startPrefixMapping.call(this.parent.contentHandler,prefix,uri):undefined};XMLFilterImpl.prototype.endPrefixMapping=function(prefix){return this.parent?this.parent.contentHandler.endPrefixMapping.call(this.parent.contentHandler,prefix):undefined};XMLFilterImpl.prototype.processingInstruction=function(target,data){return this.parent?this.parent.contentHandler.processingInstruction.call(this.parent.contentHandler,target,data):undefined};XMLFilterImpl.prototype.ignorableWhitespace=function(ch,start,length){return this.parent?this.parent.contentHandler.ignorableWhitespace.call(this.parent.contentHandler,ch,start,length):undefined};XMLFilterImpl.prototype.characters=function(ch,start,length){return this.parent?this.parent.contentHandler.characters.call(this.parent.contentHandler,ch,start,length)
:undefined};XMLFilterImpl.prototype.skippedEntity=function(name){return this.parent?this.parent.contentHandler.skippedEntity.call(this.parent.contentHandler,name):undefined};XMLFilterImpl.prototype.endDocument=function(){return this.parent?this.parent.contentHandler.endDocument.call(this.parent.contentHandler):undefined};XMLFilterImpl.prototype.setDocumentLocator=function(locator){return this.parent?this.parent.contentHandler.setDocumentLocator.call(this.parent.contentHandler,locator):undefined};XMLFilterImpl.prototype.resolveEntity=function(publicId,systemId){if(this.parent&&this.parent.entityResolver){return this.parent.entityResolver.resolveEntity.call(this.parent.entityResolver,publicId,systemId)}return undefined};XMLFilterImpl.prototype.notationDecl=function(name,publicId,systemId){if(this.parent&&this.parent.dtdHandler&&this.parent.dtdHandler.notationDecl){return this.parent.dtdHandler.notationDecl.call(this.parent.dtdHandler,name,publicId,systemId)}retur
n undefined};XMLFilterImpl.prototype.unparsedEntityDecl=function(name,publicId,systemId,notationName){if(this.parent&&this.parent.dtdHandler&&this.parent.dtdHandler.unparsedEntityDecl){return this.parent.dtdHandler.unparsedEntityDecl.call(this.parent.dtdHandler,name,publicId,systemId,notationName)}return undefined};XMLFilterImpl.prototype.warning=function(saxParseException){if(this.parent&&this.parent.errorHandler){return this.parent.errorHandler.warning.call(this.parent.errorHandler,saxParseException)}return undefined};XMLFilterImpl.prototype.error=function(saxParseException){if(this.parent&&this.parent.errorHandler){return this.parent.errorHandler.error.call(this.parent.errorHandler,saxParseException)}return undefined};XMLFilterImpl.prototype.fatalError=function(saxParseException){if(this.parent&&this.parent.errorHandler){return this.parent.errorHandler.fatalError.call(this.parent.errorHandler,saxParseException)}return undefined};XMLFilterImpl
.prototype.parseString=function(xml){return this.parent.parseString.call(this.parent,xml)};function XMLFilterImpl2(parent){return XMLFilterImpl.call(this,parent)}XMLFilterImpl2.prototype=new XMLFilterImpl();XMLFilterImpl2.prototype.toString=function(){return"XMLFilterImpl2"};XMLFilterImpl2.prototype.attributeDecl=function(eName,aName,type,mode,value){if(this.parent&&this.parent.declarationHandler&&this.parent.declarationHandler.attributeDecl){return this.parent.declarationHandler.attributeDecl.call(this.parent.declarationHandler,eName,aName,type,mode,value)}return undefined};XMLFilterImpl2.prototype.elementDecl=function(name,model){if(this.parent&&this.parent.declarationHandler&&this.parent.declarationHandler.elementDecl){return this.parent.declarationHandler.elementDecl.call(this.parent.declarationHandler,name,model)}return undefined};XMLFilterImpl2.prototype.externalEntityDecl=function(name,publicId,systemId){if(this.parent&&this.parent.declar
ationHandler&&this.parent.declarationHandler.externalEntityDecl){return this.parent.declarationHandler.externalEntityDecl.call(this.parent.declarationHandler,name,publicId,systemId)}return undefined};XMLFilterImpl2.prototype.internalEntityDecl=function(name,value){if(this.parent&&this.parent.declarationHandler&&this.parent.declarationHandler.internalEntityDecl){return this.parent.declarationHandler.internalEntityDecl.call(this.parent.declarationHandler,name,value)}return undefined};XMLFilterImpl2.prototype.comment=function(ch,start,length){if(this.parent&&this.parent.lexicalHandler&&this.parent.lexicalHandler.comment){return this.parent.lexicalHandler.comment.call(this.parent.lexicalHandler,ch,start,length)}return undefined};XMLFilterImpl2.prototype.endCDATA=function(){if(this.parent&&this.parent.lexicalHandler&&this.parent.lexicalHandler.endCDATA){return this.parent.lexicalHandler.endCDATA.call(this.parent.lexicalHandler)}return
 undefined};XMLFilterImpl2.prototype.endDTD=function(){if(this.parent&&this.parent.lexicalHandler&&this.parent.lexicalHandler.endDTD){return this.parent.lexicalHandler.endDTD.call(this.parent.lexicalHandler)}return undefined};XMLFilterImpl2.prototype.endEntity=function(name){if(this.parent&&this.parent.lexicalHandler&&this.parent.lexicalHandler.endEntity){return this.parent.lexicalHandler.endEntity.call(this.parent.lexicalHandler,name)}return undefined};XMLFilterImpl2.prototype.startCDATA=function(){if(this.parent&&this.parent.lexicalHandler&&this.parent.lexicalHandler.startCDATA){return this.parent.lexicalHandler.startCDATA.call(this.parent.lexicalHandler)}return undefined};XMLFilterImpl2.prototype.startDTD=function(name,publicId,systemId){if(this.parent&&this.parent.lexicalHandler&&this.parent.lexicalHandler.startDTD){return this.parent.lexicalHandler.startDTD.call(this.parent.lexicalHandler,name,publicId,systemId)}retu
rn undefined};XMLFilterImpl2.prototype.startEntity=function(name){if(this.parent&&this.parent.lexicalHandler&&this.parent.lexicalHandler.startEntity){return this.parent.lexicalHandler.startEntity.call(this.parent.lexicalHandler,name)}return undefined};XMLFilterImpl2.prototype.startCharacterReference=function(hex,number){if(this.parent&&this.parent.lexicalHandler&&this.parent.lexicalHandler.startCharacterReference){return this.parent.lexicalHandler.startCharacterReference.call(this.parent.lexicalHandler,hex,number)}return undefined};XMLFilterImpl2.prototype.resolveEntity=function(name,publicId,baseURI,systemId){if(this.parent&&this.parent.entityResolver&&this.parent.entityResolver.resolveEntity){return this.parent.entityResolver.resolveEntity.call(this.parent.entityResolver,name,publicId,baseURI,systemId)}return undefined};XMLFilterImpl2.prototype.getExternalSubset=function(name,baseURI){if(this.parent&&this.parent.entityResolver&
amp;&this.parent.entityResolver.getExternalSubset){return this.parent.entityResolver.getExternalSubset.call(this.parent.entityResolver,name,baseURI)}return undefined};this.XMLFilterImpl=XMLFilterImpl;this.XMLFilterImpl2=XMLFilterImpl2}()); (function(){function PrefixNotFoundException(prefix){this.prefix=prefix}function NamespaceSupport(){}NamespaceSupport.prototype.declarePrefix=function(prefix,uri){var namespacesOfThatLevel=this.namespaces[this.namespaces.length-1];namespacesOfThatLevel[prefix]=uri};NamespaceSupport.prototype.getDeclaredPrefixes=function(){var declaredPrefixes=[];var i=this.namespaces.length;while(i--){for(var prefix in this.namespaces[i]){declaredPrefixes.push(prefix)}}return declaredPrefixes};NamespaceSupport.prototype.getPrefix=function(uri){var i=this.namespaces.length;while(i--){var namespacesOfThatLevel=this.namespaces[i];for(var prefix in namespacesOfThatLevel){if(namespacesOfThatLevel[prefix]===uri){return prefix}}}return null};NamespaceSupport.prototype.
getPrefixes=function(){throw new SAXNotSupportedException("NamespaceSupport.getPrefixes()")};NamespaceSupport.prototype.getPrefixes=function(uri){throw new SAXNotSupportedException("NamespaceSupport.getPrefixes(uri)")};NamespaceSupport.prototype.getURI=function(prefix){if(prefix===null){return null}var i=this.namespaces.length;while(i--){var namespaceURI=this.namespaces[i][prefix];if(namespaceURI){return namespaceURI}}if(!prefix){return null}throw new PrefixNotFoundException(prefix)};NamespaceSupport.prototype.isNamespaceDeclUris=function(){throw new SAXNotSupportedException("NamespaceSupport.isNamespaceDeclUris()")};NamespaceSupport.prototype.popContext=function(){return this.namespaces.pop()};NamespaceSupport.prototype.processName=function(qName,parts,isAttribute){throw new SAXNotSupportedException("NamespaceSupport.processName(qName, parts, isAttribute)")};NamespaceSupport.prototype.pushContext=function(){var namespacesOfThatLevel={};this.namespaces.push(namespacesOfThatLevel)};Nam
espaceSupport.prototype.reset=function(){this.namespaces=[];var xmlNamespace={};xmlNamespace.xml=NamespaceSupport.XMLNS;this.namespaces.push(xmlNamespace)};NamespaceSupport.prototype.setNamespaceDeclUris=function(value){throw new SAXNotSupportedException("NamespaceSupport.setNamespaceDeclUris(value)")};NamespaceSupport.NSDECL="http://www.w3.org/xmlns/2000/";NamespaceSupport.XMLNS="http://www.w3.org/XML/1998/namespace";this.NamespaceSupport=NamespaceSupport}()); (function(){function _getIndexByQName(qName){var i=this.attsArray.length;while(i--){if(this.attsArray[i].qName===qName){return i}}return -1}function _getIndexByURI(uri,localName){var i=this.attsArray.length;while(i--){if(this.attsArray[i].namespaceURI===uri&&this.attsArray[i].localName===localName){return i}}return -1}function _getValueByIndex(index){return this.attsA
rray[index]?this.attsArray[index].value:null}function _getValueByQName(qName){var i=this.attsArray.length;while(i--){if(this.attsArray[i].qName===qName){return this.attsArray[i].value}}return null}function _getValueByURI(uri,localName){var i=this.attsArray.length;while(i--){if(this.attsArray[i].namespaceURI===uri&&this.attsArray[i].localName===localName){return this.attsArray[i].value}}return null}function _getPrefix(localName,qName){var prefix=null;if(localName.length!==qName.length){prefix=qName.split(":")[0]}return prefix}function Sax_Attribute(namespaceURI,prefix,localName,qName,type,value){this.namespaceURI=namespaceURI;if(prefix===undefined||prefix===""){this.prefix=null}else{this.prefix=prefix}this.localName=localName;this.qName=qName;this.type=type;this.value=value}function AttributesImpl(atts){this.attsArray=[];if(atts){this.setAttributes(atts)}}AttributesImpl.prototype.toString=function(){return"AttributesImpl"};AttributesImpl.prototype.getIndex=function(arg1,arg2){i
f(arg2===undefined){return _getIndexByQName.call(this,arg1)}else{return _getIndexByURI.call(this,arg1,arg2)}};AttributesImpl.prototype.getLength=function(){return this.attsArray.length};AttributesImpl.prototype.getPrefix=function(index){return this.attsArray[index].prefix};AttributesImpl.prototype.getLocalName=function(index){return this.attsArray[index].localName};AttributesImpl.prototype.getQName=function(index){return this.attsArray[index].qName};AttributesImpl.prototype.getType=function(arg1,arg2){var index;if(!arg2){if(arg1){index=parseInt(arg1,10);if(!index&&index!==0){index=_getIndexByQName.call(this,arg1)}}}else{index=_getIndexByURI.call(this,arg1,arg2)}if(index||index===0){var type=this.attsArray[index].type;if(type){return type}}return"CDATA"};AttributesImpl.prototype.getURI=function(index){return this.attsArray[index].namespaceURI};AttributesImpl.prototype.getValue=function(arg1,arg2){if(arg2===undefined){if(typeof arg1==="string"){return _getValueByQName.call(this,
arg1)}else{return _getValueByIndex.call(this,arg1)}}else{return _getValueByURI.call(this,arg1,arg2)}};AttributesImpl.prototype.addAttribute=function(uri,localName,qName,type,value){var prefix=_getPrefix.call(this,localName,qName);this.addPrefixedAttribute(uri,prefix,localName,qName,type,value)};AttributesImpl.prototype.clear=function(){this.attsArray=[]};AttributesImpl.prototype.removeAttribute=function(index){this.attsArray.splice(index,1)};AttributesImpl.prototype.addAttributeAtIndex=function(index,uri,localName,qName,type,value){var prefix=_getPrefix.call(this,localName,qName);if(index>this.attsArray.length){this.attsArray[index]=new Sax_Attribute(uri,prefix,localName,qName,type,value)}else{this.attsArray.splice(index,0,new Sax_Attribute(uri,prefix,localName,qName,type,value))}};AttributesImpl.prototype.setAttribute=function(index,uri,localName,qName,type,value){this.setURI(index,uri);this.setLocalName(index,localName);this.setQName(index,qName);this.setType(index,type);this.set
Value(index,value)};AttributesImpl.prototype.setAttributes=function(atts){for(var i=0;i<atts.getLength();i++){this.addPrefixedAttribute(atts.getURI(i),atts.getPrefix(i),atts.getLocalName(i),atts.getType(i),atts.getValue(i))}};AttributesImpl.prototype.setLocalName=function(index,localName){this.attsArray[index].localName=localName};AttributesImpl.prototype.setQName=function(index,qName){var att=this.attsArray[index];att.qName=qName;if(qName.indexOf(":")!==-1){var splitResult=qName.split(":");att.prefix=splitResult[0];att.localName=splitResult[1]}else{att.prefix=null;att.localName=qName}};AttributesImpl.prototype.setType=function(index,type){this.attsArray[index].type=type};AttributesImpl.prototype.setURI=function(index,uri){this.attsArray[index].namespaceURI=uri};AttributesImpl.prototype.setValue=function(index,value){this.attsArray[index].value=value};AttributesImpl.prototype.addPrefixedAttribute=function(uri,prefix,localName,qName,type,value){this.attsArray.push(new Sax_Attribute(
uri,prefix,localName,qName,type,value))};function Attributes2Impl(atts){AttributesImpl.call(this,atts);if(atts){for(var i=0;i<atts.getLength();i++){this.setDeclared(atts.isDeclared(i));this.setSpecified(atts.isSpecified(i))}}}Attributes2Impl.prototype.toString=function(){return"Attributes2Impl"};Attributes2Impl.prototype=new AttributesImpl();function _getIndex(arg1,arg2){var index;if(arg2===undefined){if(typeof arg1==="string"){index=_getIndexByQName.call(this,arg1)}else{index=arg1}}else{index=_getIndexByURI.call(this,arg1,arg2)}return index}Attributes2Impl.prototype.isDeclared=function(indexOrQNameOrURI,localName){var index=_getIndex(indexOrQNameOrURI,localName);return this.attsArray[index].declared};Attributes2Impl.prototype.isSpecified=function(indexOrQNameOrURI,localName){var index=_getIndex(indexOrQNameOrURI,localName);return this.attsArray[index].specified};Attributes2Impl.prototype.addAttribute=function(uri,localName,qName,type,value){var prefix=_getPrefix.call(this,localNam
e,qName);this.addPrefixedAttribute(uri,prefix,localName,qName,type,value);var index=this.getLength()-1;this.setDeclared(index,false);this.setSpecified(index,true)};Attributes2Impl.prototype.setAttributes=function(atts){};Attributes2Impl.prototype.setDeclared=function(index,value){this.attsArray[index].declared=value};Attributes2Impl.prototype.setSpecified=function(index,value){this.attsArray[index].specified=value};this.AttributesImpl=AttributesImpl;this.Attributes2Impl=Attributes2Impl}()); (function(){var STATE_XML_DECL=0;var STATE_PROLOG=1;var STATE_EXT_ENT=2;var STATE_PROLOG_DOCTYPE_DECLARED=3;var STATE_ROOT_ELEMENT=4;var STATE_CONTENT=5;var STATE_TRAILING_MISC=6;var XML_VERSIONS=["1.0","1.1"];var XML_VERSION=/^1\.\d+$/;var ENCODING=/^[A-Za-z]([A-Za-z0-9._]|-)*$/;var STANDALONE=/^yes$|^no$/;var NAME_START_CHAR=":A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u0200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\ud800-\udbff\udc00-\
udfff";var NOT_START_CHAR=new RegExp("[^"+NAME_START_CHAR+"]");var NAME_END_CHAR=".0-9\u00B7\u0300-\u036F\u203F-\u2040-";var NOT_START_OR_END_CHAR=new RegExp("[^"+NAME_START_CHAR+NAME_END_CHAR+"]");var HIGH_SURR="\ud800-\udbff";var LOW_SURR="\udc00-\udfff";var HIGH_SURR_EXP=new RegExp("["+HIGH_SURR+"]");var LOW_SURR_EXP=new RegExp("["+LOW_SURR+"]");var CHAR="\u0009\u000A\u000D\u0020-\uD7FF\uE000-\uFFFD";var NOT_CHAR="[^"+CHAR+"]";var NOT_A_CHAR=new RegExp(NOT_CHAR);var NOT_A_CHAR_ERROR_CB=function(){if(this.reader.peek().search(HIGH_SURR_EXP)!==-1){var temp_ch=this.reader.peek();this.reader.nextChar(true);if(this.reader.peek().search(LOW_SURR_EXP)!==-1){return true}return this.saxEvents.fatalError("invalid XML character, high surrogate, decimal code number '"+temp_ch.charCodeAt(0)+"' not immediately followed by a low surrogate",this)}return this.saxEvents.fatalError("invalid XML character, decimal code number '"+this.reader.peek().charCodeAt(0)+"'",this)};var NOT_A_CHAR_CB_OBJ={patter
n:NOT_A_CHAR,cb:NOT_A_CHAR_ERROR_CB};var WS_CHARS="\\t\\n\\r ";var WS_CHAR="["+WS_CHARS+"]";var WS=new RegExp(WS_CHAR);var NON_WS=new RegExp("[^"+WS_CHARS+"]");var XML_DECL_BEGIN_STR="^<\\?xml"+WS_CHAR;var XML_DECL_BEGIN=new RegExp(XML_DECL_BEGIN_STR);var XML_DECL_BEGIN_FALSE=new RegExp("^xml("+WS_CHAR+"|\\?)","i");var NOT_REPLACED_ENTITIES=/^amp$|^lt$|^gt$|^quot$/;var APOS_ENTITY=/^apos$/;var CHAR_REF_ESCAPED=/^"$|^'$/;var charRefEscaped={};charRefEscaped["'"]="&apos;";charRefEscaped['"']="&quot;";function EndOfInputException(){}EndOfInputException.prototype.toString=function(){return"EndOfInputException"};function EntityNotReplacedException(entityName){this.entityName=entityName}EntityNotReplacedException.prototype.toString=function(){return"EntityNotReplacedException"};function InternalEntityNotFoundException(entityName){this.entityName=entityName}InternalEntityNotFoundException.prototype.toString=function(){return"InternalEntityNotFoundException"};InternalEntityNotFound
Exception.prototype=null;InternalEntityNotFoundException.constructor=InternalEntityNotFoundException;function Sax_QName(prefix,localName){this.prefix=prefix;this.localName=localName;if(prefix){this.qName=prefix+":"+localName}else{this.qName=localName}}Sax_QName.prototype.equals=function(qName){return this.qName===qName.qName};function ExternalId(){this.publicId=null;this.systemId=null}ExternalId.prototype.toString=function(){return"ExternalId"};function SAXScanner(saxParser,saxEvents){this.saxParser=saxParser;this.saxEvents=saxEvents;this.NOT_CHAR=NOT_CHAR}SAXScanner.prototype.toString=function(){return"SAXScanner"};SAXScanner.prototype.init=function(){this.state=STATE_XML_DECL;this.elementsStack=[];this.namespaceSupport.reset();this.entities={};this.parameterEntities={};this.externalEntities={};this.currentEntities=[];this.relativeBaseUris=[]};SAXScanner.prototype.parse=function(reader){this.init();try{this.reader=reader;this.saxEvents.startDocument();this.startParsing();this.state=S
TATE_PROLOG;this.continueParsing()}catch(e){if(e instanceof EndOfInputException){if(this.elementsStack.length>0){this.saxEvents.fatalError("the markup "+this.elementsStack.pop()+" has not been closed",this)}else{try{this.saxEvents.endDocument()}catch(e2){throw e2}}}else{throw e}}};SAXScanner.prototype.startParsing=function(){try{this.reader.peek()}catch(e){if(e instanceof EndOfInputException){this.saxEvents.fatalError("empty document",this)}else{throw e}}if(!this.scanXMLDeclOrTextDecl()){try{this.reader.skipWhiteSpaces()}catch(e){if(e instanceof EndOfInputException){this.saxEvents.fatalError("empty document",this)}else{throw e}}}};SAXScanner.prototype.continueParsing=function(){while(true){this.next()}};SAXScanner.prototype.next=function(){if(this.elementsStack.length===0){this.reader.skipWhiteSpaces();if(this.reader.matchChar("<")){this.scanMarkup()}else{this.reader.nextChar();this.saxEvents.fatalError("can not have text at root level of the XML",this)}}else{if(this.reader.matc
hChar("<")){this.scanMarkup()}else{this.scanText()}}};SAXScanner.prototype.scanMarkup=function(){if(this.state===STATE_PROLOG){if(this.reader.matchChar("!")){if(!this.scanComment()){if(this.scanDoctypeDecl()){this.state=STATE_PROLOG_DOCTYPE_DECLARED}}}else{if(this.reader.matchChar("?")){this.scanPI()}else{this.state=STATE_ROOT_ELEMENT;this.scanMarkup()}}}else{if(this.state===STATE_PROLOG_DOCTYPE_DECLARED){if(this.reader.matchChar("!")){if(!this.scanComment()){if(this.reader.matchStr("DOCTYPE")){this.saxEvents.fatalError("can not have two doctype declarations",this)}else{this.saxEvents.fatalError("invalid declaration, only a comment is allowed here after &lt;!",this)}}}else{if(this.reader.matchChar("?")){this.scanPI()}else{this.state=STATE_ROOT_ELEMENT;this.scanMarkup()}}}else{if(this.state===STATE_ROOT_ELEMENT){if(this.scanElement()){if(this.elementsStack.length>0){this.state=STATE_CONTENT}else{this.state=STATE_TRAILING_MISC}}else{this.saxEvents.fatalError("document is empty
, no root element detected",this)}}else{if(this.state===STATE_CONTENT){if(this.reader.matchChar("!")){if(!this.scanComment()){if(!this.scanCData()){this.saxEvents.fatalError("neither comment nor CDATA after &lt;!",this)}}}else{if(this.reader.matchChar("?")){this.scanPI()}else{if(this.reader.matchChar("/")){if(this.scanEndingTag()){if(this.elementsStack.length===0){this.state=STATE_TRAILING_MISC}}}else{if(!this.scanElement()){this.saxEvents.fatalError("not valid markup",this)}}}}}else{if(this.state===STATE_TRAILING_MISC){if(this.reader.matchChar("!")){if(!this.scanComment()){this.saxEvents.fatalError("end of document, only comments or processing instructions are allowed",this)}}else{if(this.reader.matchChar("?")){if(!this.scanPI()){this.saxEvents.fatalError("end of document, only comment or processing instruction are allowed",this)}}else{if(this.reader.matchChar("/")){this.saxEvents.fatalError("invalid ending tag at root of the document",this)}else{this.saxEvents.fatalError("only o
ne document element is allowed",this)}}}}}}}}};SAXScanner.prototype.scanText=function(){var content=this.scanCharData();while(this.reader.matchChar("&")){try{var charRef=this.scanRef();if(charRef){content+=charRef}}catch(e){if(e instanceof EntityNotReplacedException){content+="&"+e.entityName+";"}else{if(e instanceof InternalEntityNotFoundException){var externalId=this.externalEntities[e.entityName];if(externalId===undefined){this.saxEvents.error("entity : ["+e.entityName+"] not declared as an internal entity or as an external one",this)}else{this.includeEntity(e.entityName,externalId)}}else{throw e}}}content+=this.scanCharData()}content=content.replace(/\r\n/g,"\n");if(content.search(NON_WS)===-1){this.saxEvents.ignorableWhitespace(content,0,content.length)}else{this.saxEvents.characters(content,0,content.length)}};SAXScanner.prototype.scanCharData=function(){var content=this.reader.nextCharRegExp(this.CHAR_DATA_REGEXP,NOT_A_CHAR_CB_OBJ);while(this.reader.matchChar("]")){if(t
his.reader.matchStr("]>")){this.saxEvents.error("Text must not contain a literal ']]&gt;' sequence",this)}content+="]"+this.reader.nextCharRegExp(this.CHAR_DATA_REGEXP,NOT_A_CHAR_CB_OBJ)}return content};SAXScanner.prototype.getRelativeBaseUri=function(){var returned=this.saxParser.baseURI;var i=this.relativeBaseUris.length;while(i--){returned+=this.relativeBaseUris[i]}return returned};SAXScanner.prototype.includeEntity=function(entityName,replacement){if(replacement instanceof ExternalId){try{var externalEntity=this.saxEvents.resolveEntity(entityName,replacement.publicId,this.saxParser.baseURI,replacement.systemId);if(externalEntity!==undefined){if(externalEntity.search(new RegExp("&"+entityName+";"))!==-1){this.saxEvents.fatalError("Recursion detected : ["+entityName+"] contains a reference to itself",this)}this.includeText(externalEntity);var oldState=this.state;this.state=STATE_EXT_ENT;if(this.reader.matchRegExp(6,XML_DECL_BEGIN,true)){this.startParsing()}this.state=oldS
tate}}catch(e){this.saxEvents.error("issue at resolving entity : ["+entityName+"], publicId : ["+replacement.publicId+"], uri : ["+this.saxParser.baseURI+"], systemId : ["+replacement.systemId+"], got exception : ["+e.toString()+"]",this)}}else{if(replacement.search(new RegExp("&"+entityName+";"))!==-1){this.saxEvents.fatalError("Recursion detected : ["+entityName+"] contains a reference to itself",this)}this.includeText(replacement)}};SAXScanner.prototype.includeText=function(replacement){this.reader.unread(replacement)};SAXScanner.prototype.scanRef=function(){if(this.reader.matchChar("#")){return this.scanCharRef()}else{this.scanEntityRef()}};SAXScanner.prototype.scanComment=function(){if(this.reader.matchChar("-")){if(this.reader.matchChar("-")){var comment=this.reader.nextCharRegExp(new RegExp(NOT_CHAR+"|-"),NOT_A_CHAR_CB_OBJ);while(this.reader.matchChar("-")){if(this.reader.matchStr("->")){break}else{if(this.reader.matchChar("-")){return this.saxEvents.fatalError("end of c
omment not valid, must be --&gt;",this)}}comment+="-"+this.reader.nextCharRegExp(new RegExp(NOT_CHAR+"|-"),NOT_A_CHAR_CB_OBJ)}this.saxEvents.comment(comment,0,comment.length);return true}else{return this.saxEvents.fatalError("beginning comment markup is invalid, must be &lt;!--",this)}}else{return false}};SAXScanner.prototype.setEncoding=function(encoding){if(this.saxParser.contentHandler.locator){this.saxParser.contentHandler.locator.setEncoding(this.encoding||encoding)}};SAXScanner.prototype.setXMLVersion=function(version){if(version){if(XML_VERSIONS.indexOf(version)===-1){this.saxEvents.fatalError("The specified XML Version is not a presently valid XML version number",this)}else{if(version==="1.1"&&this.saxParser.features["http://xml.org/sax/features/xml-1.1"]===false){this.saxEvents.fatalError("The XML text specifies version 1.1, but this parser does not support this version.",this)}}th
is.saxParser.properties["http://xml.org/sax/properties/document-xml-version"]=version;if(this.saxParser.contentHandler.locator){this.saxParser.contentHandler.locator.setXMLVersion(version)}}};SAXScanner.prototype.scanXMLDeclOrTextDeclAttribute=function(allowableAtts,allowableValues,requireWS){if(this.reader.equals("?")){return false}if(requireWS&&this.reader.peek().search(WS)===-1){return this.saxEvents.fatalError("The XML Declaration or Text Declaration must possess a space between the version/encoding/standalone information.",this)}this.reader.skipWhiteSpaces();if(this.reader.equals("?")){return false}var attName=this.scanName();var attPos=allowableAtts.indexOf(attName);if(attPos===-1){if(["version","encoding","standalone"].indexOf(attName)!==-1){return this.saxEvents.fatalError('The attribute name "'+attName+'" was not expected at this position in an XML or text declaration. It wa
s expected to be: '+allowableAtts.join(", "),this)}return this.saxEvents.fatalError('The attribute name "'+attName+'" does not match the allowable names in an XML or text declaration: '+allowableAtts.join(", "),this)}this.reader.skipWhiteSpaces();if(this.reader.matchChar("=")){this.reader.skipWhiteSpaces();if(this.reader.equals('"')||this.reader.equals("'")){try{var attValue=this.reader.quoteContent();if(attValue.search(allowableValues[attPos])===-1){return this.saxEvents.fatalError('The attribute value "'+attValue+'" does not match the allowable values in an XML or text declaration: '+allowableValues[attPos],this)}}catch(e){if(e instanceof EndOfInputException){return this.saxEvents.fatalError("document incomplete, attribute value declaration must end with a quote",this)}else{throw e}}}else{return this.saxEvents.fatalError("invalid declaration attribute value declaration, must begin with a quote",this)}}else{return this.saxEvents.fatalError("invalid declaration attribute, must contain
 = between name and value",this)}return[attName,attValue]};SAXScanner.prototype.scanXMLDeclOrTextDecl=function(){var version=null;var encoding="UTF-8";if(this.reader.matchRegExp(6,XML_DECL_BEGIN)){var standalone=false;if(this.state===STATE_XML_DECL){var versionArr=this.scanXMLDeclOrTextDeclAttribute(["version"],[XML_VERSION]);if(!versionArr){return this.saxEvents.fatalError("An XML Declaration must have version information",this)}version=versionArr[1];this.setXMLVersion(version);var encodingOrStandalone=this.scanXMLDeclOrTextDeclAttribute(["encoding","standalone"],[ENCODING,STANDALONE],true);if(encodingOrStandalone){if(encodingOrStandalone[0]==="encoding"){encoding=encodingOrStandalone[1];this.setEncoding(encoding);var standaloneArr=this.scanXMLDeclOrTextDeclAttribute(["standalone"],[STANDALONE],true);if(standaloneArr&&standaloneArr==="yes"){standalone=true}}}this.saxParser.features["http://xml.o
rg/sax/features/is-standalone"]=standalone}else{var versionOrEncodingArr=this.scanXMLDeclOrTextDeclAttribute(["version","encoding"],[XML_VERSION,ENCODING]);if(versionOrEncodingArr[0]==="version"){version=versionOrEncodingArr[1];this.setXMLVersion(version);versionOrEncodingArr=this.scanXMLDeclOrTextDeclAttribute(["encoding"],[ENCODING],true)}if(!versionOrEncodingArr){return this.saxEvents.fatalError("A text declaration must possess explicit encoding information",this)}encoding=versionOrEncodingArr[1];this.setEncoding(encoding)}this.reader.skipWhiteSpaces();if(this.reader.unequals("?")){return this.saxEvents.fatalError("invalid markup, '"+this.reader.peek()+"', in XML or text declaration where '?' expected",this)}this.reader.nextChar(true);if(this.reader.unequals(">")){return this.saxEvents.fatalError("invalid markup inside XML or text declaration; must end with &gt;",this)}this.reader.nextChar();return true}else{if(this.state===STATE_XML_DECL){this.setXMLVersion("1.0");if(th
is.saxParser.contentHandler.locator){this.saxParser.contentHandler.locator.setEncoding(encoding)}this.saxParser.features["http://xml.org/sax/features/is-standalone"]=false}return false}};SAXScanner.prototype.scanPI=function(){if(this.reader.matchRegExp(4,XML_DECL_BEGIN_FALSE)){return this.saxEvents.fatalError("XML Declaration cannot occur past the very beginning of the document.",this)}var piName=this.scanName();this.reader.skipWhiteSpaces();var piData=this.reader.nextCharRegExp(new RegExp(NOT_CHAR+"|\\?"),NOT_A_CHAR_CB_OBJ);while(this.reader.matchChar("?")){if(this.reader.matchChar(">")){break}piData+="?"+this.reader.nextCharRegExp(new RegExp(NOT_CHAR+"|\\?"),NOT_A_CHAR_CB_OBJ)}this.saxEvents.processingInstruction(piName,piData);return true};SAXScanner.prototype.loadExternalDtd=function(externalId){try{var uri;if(this.saxParser.baseURI){uri=this.saxParser.baseURI+externalId.systemId}else{uri=exte
rnalId.systemId}var extSubset=SAXParser.loadFile(uri);this.scanExtSubset(extSubset)}catch(e){this.saxEvents.warning("exception : ["+e.toString()+"] trying to load external subset : ["+this.saxParser.baseURI+externalId.systemId+"]",this)}};SAXScanner.prototype.scanDoctypeDecl=function(){if(this.reader.matchStr("DOCTYPE")){this.reader.skipWhiteSpaces();var name=this.reader.nextCharRegExp(/[ \[>]/);this.reader.skipWhiteSpaces();var externalId=new ExternalId();if(this.scanExternalId(externalId)){this.reader.skipWhiteSpaces()}this.saxEvents.startDTD(name,externalId.publicId,externalId.systemId);if(this.reader.matchChar("[")){this.reader.skipWhiteSpaces();while(this.reader.unequals("]")){this.scanDoctypeDeclIntSubset();this.reader.skipWhiteSpaces()}this.reader.nextChar()}if(externalId.systemId!==null){this.loadExternalDtd(externalId)}if(this.reader.unequals(">")){return this.saxEvents.fatalError("invalid content in doctype declaration",this)}this.reader.nextChar();this.saxEvents.endDT
D();return true}else{return this.saxEvents.fatalError("invalid doctype declaration, must be &lt;!DOCTYPE",this)}};SAXScanner.prototype.scanExtSubset=function(extSubset){if(extSubset.search(NON_WS)!==-1){var oldReader=this.reader;this.reader=new ReaderWrapper(new StringReader(extSubset));this.startParsing();try{while(true){this.scanDoctypeDeclIntSubset();this.reader.skipWhiteSpaces()}}catch(e){if(!(e instanceof EndOfInputException)){throw e}}this.reader=oldReader}};SAXScanner.prototype.scanExternalId=function(externalId){if(this.reader.matchStr("SYSTEM")){this.reader.skipWhiteSpaces();externalId.systemId=this.scanSystemLiteral();return true}else{if(this.reader.matchStr("PUBLIC")){this.reader.skipWhiteSpaces();externalId.publicId=this.scanPubIdLiteral();this.reader.skipWhiteSpaces();externalId.systemId=this.scanSystemLiteral();return true}}return false};SAXScanner.prototype.scanSystemLiteral=function(externalId){if(this.reader.unequals("'")&&this.reader.unequals('"')){return
 this.saxEvents.fatalError("invalid sytem Id declaration, should begin with a quote",this)}return this.reader.quoteContent()};SAXScanner.prototype.scanPubIdLiteral=function(externalId){if(this.reader.unequals("'")&&this.reader.unequals('"')){return this.saxEvents.fatalError("invalid Public Id declaration, should begin with a quote",this)}return this.reader.quoteContent()};SAXScanner.prototype.includeParameterEntity=function(){var replacement=this.scanPeRef();if(replacement instanceof ExternalId){try{var externalEntity=this.saxEvents.resolveEntity(null,replacement.publicId,null,this.saxParser.baseURI+replacement.systemId);if(externalEntity!==undefined&&externalEntity.search(NON_WS)!==-1){this.includeText(externalEntity);var oldState=this.state;this.state=STATE_EXT_ENT;if(this.reader.matchRegExp(6,XML_DECL_BEGIN,true)){this.startParsing()}this.state=oldState}}catch(e){this.saxEvents.error("issue at resolving entity : ["+entityName+"], publicId : ["+replacement.publicId+"
], uri : ["+this.saxParser.baseURI+"], systemId : ["+replacement.systemId+"], got exception : ["+e.toString()+"]",this)}}else{this.includeText(" "+replacement+" ")}};SAXScanner.prototype.scanDoctypeDeclIntSubset=function(){if(this.reader.matchChar("<")){if(this.reader.matchChar("?")){if(!this.scanPI()){this.saxEvents.fatalError("invalid processing instruction inside doctype declaration",this)}}else{if(this.reader.matchChar("!")){if(!this.scanComment()){if(!this.scanEntityDecl()&&!this.scanElementDecl()&&!this.scanAttlistDecl()&&!this.scanNotationDecl()){this.reader.nextCharWhileNot(">");this.reader.nextChar(true)}}else{this.reader.skipWhiteSpaces()}}}}else{if(this.reader.matchChar("%")){this.includeParameterEntity()}else{this.saxEvents.fatalError("invalid character in internal subset of doctype declaration : ["+this.reader.peek()+"]",this)}}};SAXScanner.prototype.scanEntityDecl=function(){var entityName,externalId,entityValue;if(this.reader.matchStr("ENTI
TY")){this.reader.skipWhiteSpaces();if(this.reader.matchChar("%")){this.reader.skipWhiteSpaces();entityName=this.scanName();this.reader.skipWhiteSpaces();if(!this.parameterEntities[entityName]){externalId=new ExternalId();if(!this.scanExternalId(externalId)){entityValue=this.scanEntityValue();this.parameterEntities[entityName]=entityValue;this.saxEvents.internalEntityDecl("%"+entityName,entityValue)}else{this.parameterEntities[entityName]=externalId}}else{var ignored=this.reader.nextCharWhileNot(">");this.saxEvents.warning("entity : ["+entityName+"] is declared several times, only first value : ["+this.parameterEntities[entityName]+"] is effective, declaration : ["+ignored+"] is ignored")}}else{entityName=this.scanName();this.reader.skipWhiteSpaces();externalId=new ExternalId();if(this.scanExternalId(externalId)){this.reader.skipWhiteSpaces();if(this.reader.matchStr("NDATA")){this.reader.skipWhiteSpaces();var ndataName=this.scanName();this.saxEvents.unparsedEntityDecl(entityName,ex
ternalId.publicId,externalId.systemId,ndataName)}if(this.externalEntities[entityName]===undefined){this.externalEntities[entityName]=externalId}else{this.saxEvents.warning("external entity : ["+entityName+"] is declared several times, only first value : ["+this.externalEntities[entityName]+"] is effective, declaration : ["+externalId+"] is ignored")}}else{entityValue=this.scanEntityValue();if(this.entities[entityName]===undefined){if(this.isEntityReferencingItself(entityName,entityValue)){this.saxEvents.error("circular entity declaration, entity : ["+entityName+"] is referencing itself directly or indirectly",this)}else{this.entities[entityName]=entityValue;this.saxEvents.internalEntityDecl(entityName,entityValue)}}else{this.saxEvents.warning("entity : ["+entityName+"] is declared several times, only first value : ["+this.entities[entityName]+"] is effective, declaration : ["+entityValue+"] is ignored")}}}this.reader.nextChar(true);return true}return false};SAXScanner.prototype.isEnti
tyReferencingItself=function(entityName,entityValue){var parsedValue=/^[^&]*&([^;]+);(.*)/.exec(entityValue);if(parsedValue!==null){if(parsedValue[1]===entityName){return true}else{var replacement=this.entities[parsedValue[1]];if(replacement!==undefined){var check=this.isEntityReferencingItself(entityName,replacement);return check||this.isEntityReferencingItself(entityName,parsedValue[2])}else{return this.isEntityReferencingItself(entityName,parsedValue[2])}}}else{return false}};SAXScanner.prototype.scanEntityValue=function(){if(this.reader.equals('"')||this.reader.equals("'")){var quote=this.reader.next();var regexp=new RegExp("["+quote+"&%]");var entityValue=this.reader.nextCharRegExp(regexp);while(true){if(this.reader.matchChar("%")){var peRef=this.scanPeRef();if(peRef instanceof ExternalId){peRef=this.saxEvents.resolveEntity(null,peRef.publicId,null,this.saxParser.baseURI+peRef.systemId)}entityValue+=peRef+this.reader.nextCharRegExp(regexp)}else{if(this.reader.matchCha
r("&")){if(this.reader.matchChar("#")){var charRef=this.scanCharRef();entityValue+=charRef+this.reader.nextCharRegExp(regexp)}else{entityValue+="&"+this.reader.nextCharRegExp(regexp)}}else{break}}}if(/\uFFFF/.test(entityValue)){return this.saxEvents.fatalError("invalid entity declaration value, must not contain U+FFFF",this)}this.reader.nextChar();return entityValue}else{return this.saxEvents.error("invalid entity value declaration, must begin with a quote",this)}};SAXScanner.prototype.scanPeRef=function(entityName){try{entityName=this.reader.nextCharWhileNot(";");this.reader.nextChar(true);var replacement=this.parameterEntities[entityName];if(replacement!==undefined){return replacement}this.saxEvents.fatalError("parameter entity reference : ["+entityName+"] has not been declared, no replacement found",this);return""}catch(e){if(e instanceof EndOfInputException){return this.saxEvents.fatalError("document incomplete, parameter entity reference must end with ;",this)}else{throw 
e}}};SAXScanner.prototype.scanElementDecl=function(){if(this.reader.matchStr("ELEMENT")){this.reader.skipWhiteSpaces();var name=this.scanName();this.reader.skipWhiteSpaces();var model=this.scanContentModelDecl();this.reader.nextChar(true);this.saxEvents.elementDecl(name,model);return true}return false};SAXScanner.prototype.scanContentModelDecl=function(){var regexp=new RegExp("[%>]");var model=this.reader.nextCharRegExp(regexp);while(this.reader.matchChar("%")){this.includeParameterEntity();model+=this.reader.nextCharRegExp(regexp)}return model.replace(new RegExp(WS_CHAR+"+","g")," ")};SAXScanner.prototype.scanAttlistDecl=function(){if(this.reader.matchStr("ATTLIST")){this.reader.skipWhiteSpaces();if(this.reader.matchChar("%")){this.includeParameterEntity();this.reader.skipWhiteSpaces()}var eName=this.scanName();this.reader.skipWhiteSpaces();while(this.reader.unequals(">")){this.scanAttDef(eName)}this.reader.nextChar(true);return true}return false};SAXScanner.prototype.scanAttDe
f=function(eName){if(this.reader.matchChar("%")){this.includeParameterEntity();this.reader.skipWhiteSpaces()}var aName=this.scanName();this.reader.skipWhiteSpaces();var type=this.scanAttType();this.reader.skipWhiteSpaces();var mode=null;if(this.reader.equals("#")){mode=this.reader.nextCharRegExp(new RegExp(WS_CHAR+"|>"));this.reader.skipWhiteSpaces()}var attValue=null;if(mode===null||mode==="#FIXED"){if(this.reader.matchChar("%")){this.includeParameterEntity();this.reader.skipWhiteSpaces()}if(this.reader.equals('"')||this.reader.equals("'")){var quote=this.reader.next();attValue=this.reader.nextCharRegExp(new RegExp("["+quote+"<]"));if(this.reader.equals("<")){this.saxEvents.fatalError("invalid attribute value, must not contain &lt;",this)}this.reader.nextChar()}}this.saxEvents.attributeDecl(eName,aName,type,mode,attValue)};SAXScanner.prototype.scanAttType=function(){var type;if(this.reader.matchChar("(")){this.reader.skipWhiteSpaces();type=this.reader.nextCharRegExp(NOT_
START_OR_END_CHAR);while(this.reader.peek().search(WS)!==-1){this.reader.skipWhiteSpaces();type+=this.reader.nextCharRegExp(NOT_START_OR_END_CHAR)}if(this.reader.unequals(")")){this.saxEvents.error("Invalid character : ["+this.reader.peek()+"] in ATTLIST enumeration",this);type+=this.reader.nextCharRegExp(WS)}else{this.reader.nextChar()}type="("+type+")"}else{if(this.reader.matchStr("NOTATION")){this.reader.skipWhiteSpaces();if(this.reader.matchChar("(")){this.reader.skipWhiteSpaces();type=this.scanName();this.reader.skipWhiteSpaces();if(this.reader.unequals(")")){this.saxEvents.error("Invalid character : ["+this.reader.peek()+"] in ATTLIST enumeration",this)}this.reader.nextChar()}else{this.saxEvents.error("Invalid NOTATION, must be followed by '('",this);this.reader.nextCharWhileNot(">");this.reader.nextChar(true)}type="NOTATION ("+type+")"}else{var regexp=new RegExp("["+WS_CHARS+"%]");type=this.reader.nextCharRegExp(regexp);while(this.reader.matchChar("%")){this.includeParameter
Entity();type+=this.reader.nextCharRegExp(regexp)}if(!/^CDATA$|^ID$|^IDREF$|^IDREFS$|^ENTITY$|^ENTITIES$|^NMTOKEN$|^NMTOKENS$/.test(type)){this.saxEvents.error("Invalid type : ["+type+"] defined in ATTLIST",this)}}}return type};SAXScanner.prototype.scanNotationDecl=function(){if(this.reader.matchStr("NOTATION")){this.reader.skipWhiteSpaces();var name=this.scanName();this.reader.skipWhiteSpaces();var externalId=new ExternalId();if(this.reader.matchStr("PUBLIC")){this.reader.skipWhiteSpaces();externalId.publicId=this.scanPubIdLiteral();this.reader.skipWhiteSpaces();if(this.reader.unequals(">")){externalId.systemId=this.scanSystemLiteral();this.reader.skipWhiteSpaces()}}else{this.scanExternalId(externalId)}this.reader.nextChar(true);this.saxEvents.notationDecl(name,externalId.publicId,externalId.systemId);return true}return false};SAXScanner.prototype.scanQName=function(defaultPrefix){var name=this.scanName();var localName=name;if(name.indexOf(":")!==-1){var splitResult=name.split(":"
);defaultPrefix=splitResult[0];localName=splitResult[1]}this.reader.skipWhiteSpaces();return new Sax_QName(defaultPrefix,localName)};SAXScanner.prototype.scanElement=function(){var qName=this.scanQName("");this.elementsStack.push(qName.qName);var atts=this.scanAttributes(qName);var namespaceURI=null;try{namespaceURI=this.namespaceSupport.getURI(qName.prefix)}catch(e){this.saxEvents.error("namespace of element : ["+qName.qName+"] not found",this)}var selfClosed=false;if(this.reader.matchChar("/")){if(this.reader.equals(">")){selfClosed=true;this.elementsStack.pop();this.endMarkup(namespaceURI,qName)}else{this.saxEvents.fatalError("invalid empty markup, must finish with /&gt;",this)}}if(this.reader.unequals(">")){this.saxEvents.fatalError("invalid element, must finish with &gt;",this)}this.reader.nextChar(true);this.saxEvents.startElement(namespaceURI,qName.localName,qName.qName,atts);if(selfClosed){this.saxEvents.endElement(namespaceURI,qName.localName,qName.qName)}return
 true};SAXScanner.prototype.scanAttributes=function(qName){var atts=this.saxParser.getAttributesInstance();this.namespaceSupport.pushContext();var baseUriAddition="";this.scanAttribute(qName,atts);var i=atts.getLength();while(i--){var prefix=atts.getPrefix(i);var namespaceURI=null;try{namespaceURI=this.namespaceSupport.getURI(prefix)}catch(e){this.saxEvents.error("namespace of attribute : ["+qName.qName+"] not found",this)}atts.setURI(i,namespaceURI);if(namespaceURI===NamespaceSupport.XMLNS){switch(atts.getLocalName(i)){case"base":baseUriAddition=atts.getValue(i);break;default:break}}}this.relativeBaseUris.push(baseUriAddition);return atts};SAXScanner.prototype.scanAttribute=function(qName,atts){this.reader.skipWhiteSpaces();if(this.reader.unequals(">")&&this.reader.unequals("/")){var attQName=this.scanQName(null);if(this.reader.matchChar("=")){this.reader.skipWhiteSpaces();var value=this.scanAttValue();if(attQName.prefix==="xmlns"){this.namespaceSupport.declarePrefix(attQN
ame.localName,value);this.saxEvents.startPrefixMapping(attQName.localName,value)}else{if(attQName.qName==="xmlns"){this.namespaceSupport.declarePrefix("",value);this.saxEvents.startPrefixMapping("",value)}else{if(atts.getIndex(attQName.qName)!==-1){this.saxEvents.error("multiple declarations for same attribute : ["+attQName.qName+"]",this)}else{atts.addAttribute(undefined,attQName.localName,attQName.qName,undefined,value)}}}this.scanAttribute(qName,atts)}else{this.saxEvents.fatalError("invalid attribute, must contain = between name and value",this)}}};SAXScanner.prototype.scanAttValue=function(){var attValue,quote;if(this.reader.equals('"')||this.reader.equals("'")){quote=this.reader.next();try{attValue=this.reader.nextCharRegExp(new RegExp("["+quote+"<&\uFFFF]"));if(this.saxEvents.attWhitespaceNormalize){attValue=this.saxEvents.attWhitespaceNormalize(attValue)}while(this.reader.matchChar("&")){try{var charRef=this.scanRef();if(charRef){attValue+=charRef}}catch(e2){if(e2 in
stanceof InternalEntityNotFoundException){this.saxEvents.error("entity reference : ["+e2.entityName+"] not declared, ignoring it",this)}else{if(e2 instanceof EntityNotReplacedException){attValue+="&"+e2.entityName+";"}else{throw e2}}}var attValueConcat=this.reader.nextCharRegExp(new RegExp("["+quote+"<&]"));if(this.saxEvents.attWhitespaceNormalize){attValueConcat=this.saxEvents.attWhitespaceNormalize(attValueConcat)}attValue+=attValueConcat}if(this.reader.equals("<")){return this.saxEvents.fatalError("invalid attribute value, must not contain &lt;",this)}if(this.reader.equals("\uFFFF")){return this.saxEvents.fatalError("invalid attribute value, must not contain U+FFFF",this)}this.reader.nextChar(true);if(/[^\/>"]/.test(this.reader.peek())&&this.reader.peek().search(WS)===-1){this.saxEvents.fatalError("Whitespace is required between attribute-value pairs.",this)}this.reader.skipWhiteSpaces()}catch(e){if(e instanceof EndOfInputException){return this.saxEvent
s.fatalError("document incomplete, attribute value declaration must end with a quote",this)}else{throw e}}return attValue}else{return this.saxEvents.fatalError("invalid attribute value declaration, must begin with a quote",this)}};SAXScanner.prototype.scanCData=function(){if(this.reader.matchStr("[CDATA[")){this.saxEvents.startCDATA();var cdata=this.reader.nextCharWhileNot("]");while(!(this.reader.matchStr("]]>"))){this.reader.nextChar(true);cdata+="]"+this.reader.nextCharWhileNot("]")}if(/\uFFFF/.test(cdata)){this.saxEvents.fatalError("Character U+FFFF is not allowed within CDATA.",this)}cdata=cdata.replace(/\r\n/g,"\n");this.saxEvents.characters(cdata,0,cdata.length);this.saxEvents.endCDATA();return true}else{return false}};SAXScanner.prototype.scanCharRef=function(){var replacement,charCode="";if(this.reader.matchChar("x")){while(this.reader.unequals(";")){var ch=this.reader.next();if(!/[0-9a-fA-F]/.test(ch)){this.saxEvents.error("invalid char reference beginning with x, must co
ntain alphanumeric characters only",this)}else{charCode+=ch}}this.reader.nextChar(true);replacement=String.fromCharCode("0x"+charCode);if(this.saxEvents.startCharacterReference){this.saxEvents.startCharacterReference(true,charCode)}}else{while(this.reader.unequals(";")){var ch=this.reader.next();if(!/\d/.test(ch)){this.saxEvents.error("invalid char reference, must contain numeric characters only",this)}else{charCode+=ch}}this.reader.nextChar(true);replacement=String.fromCharCode(charCode);if(replacement.search(CHAR_REF_ESCAPED)!==-1){replacement=charRefEscaped[replacement]}if(this.saxEvents.startCharacterReference){this.saxEvents.startCharacterReference(false,charCode)}}return replacement};SAXScanner.prototype.scanEntityRef=function(){try{var entityName=this.scanName();this.reader.skipWhiteSpaces();if(this.reader.unequals(";")){this.saxEvents.error("entity : ["+entityName+"] contains an invalid character : ["+this.reader.peek()+"], or it is not ended by ;",this);return""}this.reader.n
extChar(true);this.saxEvents.startEntity(entityName);this.saxEvents.endEntity(entityName);if(entityName.search(NOT_REPLACED_ENTITIES)!==-1){throw new EntityNotReplacedException(entityName)}if(entityName.search(APOS_ENTITY)!==-1){this.includeText("'")}else{var replacement=this.entities[entityName];if(replacement===undefined){throw new InternalEntityNotFoundException(entityName)}this.includeEntity(entityName,replacement)}}catch(e){if(e instanceof EndOfInputException){return this.saxEvents.fatalError("document incomplete, entity reference must end with ;",this)}else{throw e}}};SAXScanner.prototype.scanEndingTag=function(){var qName=this.scanQName("");var namespaceURI=null;try{namespaceURI=this.namespaceSupport.getURI(qName.prefix)}catch(e){this.saxEvents.error("namespace of ending tag : ["+qName.qName+"] not found",this)}var currentElement=this.elementsStack.pop();if(qName.qName===currentElement){if(this.reader.matchChar(">")){this.endMarkup(namespaceURI,qName);this.saxEvents.endEleme
nt(namespaceURI,qName.localName,qName.qName);return true}else{return this.saxEvents.fatalError("invalid ending markup, does not finish with &gt;",this)}}else{this.reader.matchChar(">");return this.saxEvents.fatalError("invalid ending markup : ["+qName.qName+"], markup name does not match current one : ["+currentElement+"]",this)}};SAXScanner.prototype.endMarkup=function(namespaceURI,qName){var namespacesRemoved=this.namespaceSupport.popContext();for(var i in namespacesRemoved){this.saxEvents.endPrefixMapping(i)}this.relativeBaseUris.pop()};SAXScanner.prototype.scanName=function(){if(this.reader.peek().search(NOT_START_CHAR)!==-1){this.saxEvents.fatalError("invalid starting character in Name : ["+this.reader.peek()+"]",this);return""}return this.reader.nextCharRegExp(NOT_START_OR_END_CHAR)};this.SAXScanner=SAXScanner;this.EndOfInputException=EndOfInputException}()); function ReaderWrapper(reader){this.reader=reader;this.peeked=[]}ReaderWrapper.WS=new RegExp("[\\t\\n\\r ]");Reade
rWrapper.prototype.peekLen=function(len){var peekedLen=this.peeked.length;if(len<=peekedLen){return this.peeked.slice(-len).reverse().join("")}var returned=this.peeked.slice(0).reverse().join("");var lenToRead=len-peekedLen;var newRead=this.reader.read(returned,0,lenToRead);returned+=newRead;for(var i=0;i<lenToRead;i++){this.peeked.unshift(newRead.charAt(i))}return returned};ReaderWrapper.prototype.skip=function(n){for(var i=0;this.peeked.length!==0&&i<n;i++){this.peeked.pop()}n-=i;if(n){this.reader.skip(n)}};ReaderWrapper.prototype.next=function(){if(this.peeked.length!==0){return this.peeked.pop()}return this.reader.read()};ReaderWrapper.prototype.peek=function(){var peekedLen=this.peeked.length;if(peekedLen!==0){return this.peeked[peekedLen-1]}var returned=this.reader.read();this.peeked[0]=returned;return returned};ReaderWrapper.prototype.nextChar=function(dontSkipWhiteSpace){this.next();if(!dontSkipWhiteSpace){this.skipWhiteSpaces()}};ReaderWrapper.prototype.skipW
hiteSpaces=function(){while(this.peek().search(ReaderWrapper.WS)!==-1){this.next()}};ReaderWrapper.prototype.nextCharRegExp=function(regExp,continuation){var returned="",currChar=this.peek();while(true){if(currChar.search(regExp)!==-1){if(continuation&&currChar.search(continuation.pattern)!==-1){var cb=continuation.cb.call(this);if(cb!==true){return cb}returned+=currChar;currChar=this.peek();continue}return returned}else{returned+=currChar;this.next();currChar=this.peek()}}};ReaderWrapper.prototype.nextCharWhileNot=function(ch){var returned="",currChar=this.peek();while(currChar!==ch){returned+=currChar;this.next();currChar=this.peek()}return returned};ReaderWrapper.prototype.matchRegExp=function(len,regExp,dontConsume){var follow=this.peekLen(len);if(follow.search(regExp)===0){if(!dontConsume){this.skip(len)}return true}return false};ReaderWrapper.prototype.matchStr=function(str){var len=str.length;var follow=this.peekLen(len);if(follow===str){this.skip(len);return true}retur
n false};ReaderWrapper.prototype.matchChar=function(ch){if(this.equals(ch)){this.next();return true}return false};ReaderWrapper.prototype.quoteContent=function(){var quote=this.next();var content=this.nextCharWhileNot(quote);this.next();return content};ReaderWrapper.prototype.equals=function(ch){return ch===this.peek()};ReaderWrapper.prototype.unequals=function(ch){return ch!==this.peek()};ReaderWrapper.prototype.unread=function(str){var i=str.length;while(i--){this.peeked[this.peeked.length]=str.charAt(i)}}; function Reader(lock){if(lock){this.lock=lock}}Reader.prototype.close=function(){throw"The Reader close() method is abstract"};Reader.prototype.mark=function(readAheadLimit){};Reader.prototype.markSupported=function(){};Reader.prototype.read=function(cbuf,off,len){if(arguments.length>4||arguments.length===2){throw"Reader's read() method expects 0, 1, or 3 arguments"}if(!cbuf){}if(!off){}throw"The Reader read() method with 3 arguments (char[], int, and int) is abstract."};Reade
r.prototype.ready=function(){};Reader.prototype.reset=function(){};Reader.prototype.skip=function(n){};function StringReader(s){this.s=s;this.nextIdx=0;this.markIdx=0;this.length=s.length}StringReader.prototype=new Reader();StringReader.prototype.constructor=StringReader;StringReader.prototype.close=function(){};StringReader.prototype.mark=function(readAheadLimit){this.markIdx=this.nextIdx};StringReader.prototype.markSupported=function(){return true};StringReader.prototype.read=function(cbuf,off,len){if(arguments.length===0){if(this.nextIdx>=this.length){throw new EndOfInputException()}var ch=this.s.charAt(this.nextIdx);this.nextIdx++;return ch}if(arguments.length===1){cbuf=this.s.substr(this.nextIdx);this.nextIdx=this.length;return cbuf}this.nextIdx+=off;if(this.nextIdx>=this.length){throw new EndOfInputException()}cbuf=this.s.substr(this.nextIdx,len);this.nextIdx+=len;return cbuf};StringReader.prototype.ready=function(){return true};StringReader.prototype.reset=function(){this
.nextIdx=this.markIdx};StringReader.prototype.skip=function(n){this.nextIdx+=n;return n}; (function(){var that=this;function SAXException(message,exception){this.message=message;this.exception=exception}SAXException.prototype=new Error();SAXException.constructor=SAXException;SAXException.prototype.getMessage=function(){return this.message};SAXException.prototype.getException=function(){return this.exception};function SAXNotSupportedException(msg){this.message=msg||""}SAXNotSupportedException.prototype=new SAXException();SAXNotSupportedException.constructor=SAXNotSupportedException;function SAXNotRecognizedException(msg){this.message=msg||""}SAXNotRecognizedException.prototype=new SAXException();SAXNotRecognizedException.constructor=SAXNotRecognizedException;function SAXParseException(msg,locator){this.message=msg||"";this.locator=locator}SAXParseException.prototype=new SAXException();SAXParseException.constructor=SAXParseException;SAXParseException.prototype.getColumnNumber=function()
{if(this.locator){return this.locator.getColumnNumber()}};SAXParseException.prototype.getLineNumber=function(){if(this.locator){return this.locator.getLineNumber()}};SAXParseException.prototype.getPublicId=function(){if(this.locator){return this.locator.getPublicId()}};SAXParseException.prototype.getSystemId=function(){if(this.locator){return this.locator.getSystemId()}};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement){if(this==null){throw new TypeError()}var t=Object(this);var len=t.length>>>0;if(len===0){return -1}var n=0;if(arguments.length>0){n=Number(arguments[1]);if(n!=n){n=0}else{if(n!=0&&n!=Infinity&&n!=-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n))}}}if(n>=len){return -1}var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++){if(k in t&&t[k]===searchElement){return k}}return -1}}function SAXParser(contentHandler,lexicalHandler,errorHandler,declarationHandler,dtdHandler,entityResolver,locator,domNode)
{this.contentHandler=contentHandler;this.locator=locator;if(this.locator){this.locator.columnNumber=-1;this.locator.lineNumber=-1;this.locator.publicId=null;this.locator.systemId=null;this.locator.version=null;this.locator.encoding=null;this.contentHandler.setDocumentLocator(locator)}this.dtdHandler=dtdHandler;this.errorHandler=errorHandler;this.entityResolver=entityResolver||null;if(typeof that.AttributesImpl!=="function"){throw new SAXException("you must import an implementation of AttributesImpl, like AttributesImpl.js, in the html")}try{this.namespaceSupport=new NamespaceSupport()}catch(e2){throw new SAXException("you must import an implementation of NamespaceSupport, like NamespaceSupport.js, in the html",e2)}this.disallowedGetProperty=[];this.disallowedGetFeature=[];this.disallowedSetProperty=[];this.disallowedSetFeature=[];this.disallowedSetPropertyValues={};this.disallowedSetFeatureValues={};this.features={};this.features["http://xml.org/sax/features/external-general-entities"]=false;this.features["http://xml.org/sax/features/external-parameter-entities"]=false;this.features["http://xml.org/sax/features/is-standalone"]=undefined;this.features["http://xml.org/sax/features/lexical-handler/parameter-entities"]=false;this.features["http://xml.org/sax/features/namespaces"]=true;this.features["http://xml.org/sax/features/namespace-prefixes"]=false;this.features["http://xml.org/sax/features/resolve-dtd-uris"]=true;this.features["http://xml.org/sax/features/string-interning"]=true;this.features["http://xml.org/sax/features/unicode-normalization-checking"]=false;this.features["http://xml.org/sax/features/use-attributes2"]=true;this.features["http://xml.org/sax/features/use-locator2"]=!!(locator&&typeof locator.getXMLVersion==="function"&&typeof locator.getEncoding==="function");this.features["http://xml.org/sax/features/use-entity-resolver2"<
/a>]=true;this.features["http://xml.org/sax/features/validation"]=false;this.features["http://xml.org/sax/features/xmlns-uris"]=false;this.features["http://xml.org/sax/features/xml-1.1"]=false;this.features["http://apache.org/xml/features/nonvalidating/load-external-dtd"]=false;this.features["http://debeissat.nicolas.free.fr/ns/character-data-strict"]=false;this.features["http://debeissat.nicolas.free.fr/ns/instance-augmentation"]=false;t
his.features["http://debeissat.nicolas.free.fr/ns/attribute-whitespace-normalization"]=false;this.properties={};this.properties["http://xml.org/sax/properties/declaration-handler"]=this.declarationHandler=declarationHandler;this.properties["http://xml.org/sax/properties/document-xml-version"]=null;this.properties["http://xml.org/sax/properties/dom-node"]=this.domNode=domNode;this.properties["http://xml.org/sax/properties/lexical-handler"]=this.lexicalHandler=lexicalHandler||null;this.properties["http://xml.org/sax/properties/xml-string"]=null}SAXParser.prototype.toString=function(){return"SAXParser"};SAXParser.prototype.getContentHandler=function(){return this.contentHandler};SAXParser.prototype.getDTDHandler=function(){return this.dtdHandler};SAXParser.prototype.getEntityResolver=function(){return this.entityResolver};SAXParser.prototype.getErrorHandler=function(){return this.errorHandler};SAXParser.prototype.getFeature=function(name){if(this.features[name]===undefined){throw new SAXNotRecognizedException()}else{if(this.disallowedGetFeature.indexOf(name)!==-1){throw new SAXNotSupportedException()}}return this.features[name]};SAXParser.prototype.getProperty=function(name){if(this.properties[name]===undefined){throw new SAXNotRecognizedException()}else{if(this.disallowedGetProperty.indexOf(name)!==-1){throw new SAXNotSupportedException()}}return this.properties[name]};SAXParser.prototype.parse=function(inputOrSyst
emId,noCache){var systemId,xmlAsString,path;if(typeof that.InputSource==="function"&&inputOrSystemId instanceof InputSource){var charStream=inputOrSystemId.getCharacterStream();var byteStream=inputOrSystemId.getByteStream();this.systemId=inputOrSystemId.getSystemId();this.encoding=inputOrSystemId.getEncoding();if(charStream){if(charStream instanceof Reader){this.parseReader(charStream)}else{throw"character stream must be an instance of Reader"}}else{if(byteStream){throw"A byte stream InputSource is not implemented at present in SAXParser's parse() method"}else{if(this.systemId){this.parseSystemId(this.systemId,noCache)}}}}else{if(typeof inputOrSystemId==="string"){this.parseSystemId(inputOrSystemId)}else{throw"The argument supplied to SAXParser's parse() method was invalid"}}};SAXParser.prototype.parseSystemId=function(systemId,noCache){this.systemId=systemId;if(noCache){this.systemId+=((systemId.indexOf("?")===-1)?"?":"&")+"_saxQuertyTime="+new Date().getTime()}var xmlAsS
tring=SAXParser.loadFile(this.systemId);path=this.systemId.substring(0,this.systemId.lastIndexOf("/")+1);this.baseURI=path;this.parseString(xmlAsString)};SAXParser.prototype.parseString=function(xmlAsString){var reader=new StringReader(xmlAsString);this.parseReader(reader)};SAXParser.prototype.parseReader=function(reader){var readerWrapper=new ReaderWrapper(reader);this.initReaders(readerWrapper,reader);this.saxScanner.parse(readerWrapper)};SAXParser.prototype.initReaders=function(readerWrapper,reader){var saxEvents=new XMLFilterImpl2(this);this.saxScanner=new SAXScanner(this,saxEvents);this.saxScanner.namespaceSupport=this.namespaceSupport;if(this.features["http://debeissat.nicolas.free.fr/ns/character-data-strict"]){this.saxScanner.CHAR_DATA_REGEXP=new RegExp(this.saxScanner.NOT_CHAR+"|[<&\\]]")}else{this.saxScanner.CHAR_DATA_REGEXP=/[<&\]]/}if(!(this.features["http://apache.org/xml/features/nonvalidating/load-external-dtd"])){this.saxScanner.loadExternalDtd=function(externalId){}}if(this.features["http://xml.org/sax/features/validation"]){this.features["http://debeissat.nicolas.free.fr/ns/instance-augmentation"]=true;saxEvents.endDocument=this.endDocument_validating}if(this.features["http://debeissat.nicolas.free.fr/ns/attribute-whitespace-normalization"]){saxEvents.attWhitespaceNormalize=SAXParser.attWhitespaceNormalize;if(this.features["http://debeis
sat.nicolas.free.fr/ns/instance-augmentation"]){saxEvents.attWhitespaceCollapse=SAXParser.attWhitespaceCollapse}}if(this.features["http://debeissat.nicolas.free.fr/ns/instance-augmentation"]){saxEvents.startDocument=this.startDocument_augmenting;saxEvents.startDTD=this.startDTD_augmenting;saxEvents.elementDecl=this.elementDecl_augmenting;saxEvents.attributeDecl=this.attributeDecl_augmenting;if(this.features["http://xml.org/sax/features/validation"]){saxEvents.augmenting_elm=this.augmenting_elm;saxEvents.startElement=this.startElement_validating}else{saxEvents.augmenting_elm=this.augmenting_elm;saxEvents.startElement=this.startElement_augmenting}saxEvents.endElement=this.endElement_augmenting;saxEvents.characters=this.characters_augmenting}if(this.features["http://xml.org/sax/features/use-entity-resolver2"]){saxEvents.resolveEntity=this.resolveEntity}if(this.features["http://xml.org/sax/features/use-attributes2"]){this.getAttributesInstance=this.getAttributes2Instance}else{this.getAttributesInstance=this.getAttributes1Instance}if(this.contentHandler.locator){this.contentHandler.locator.reader=reader;this.contentHandler.locator.setSystemId(this.systemId);saxEvents.startDTDOld=saxEvents.startDTD;saxEvents.startDTD=function(name,publicId,systemId){this.getContentHandler().locator.setPublicId(name);return this.startDTDOld(name,publicId,systemId)};this.contentHandler.locator.getColumnNumberOld=this.contentHandler.locator.getColumnNumber;this.contentHandler.locator.getLineNumberOld=this.contentHandler.locator.getLineNumber;this.contentHandler.locator.getColumnNumber=function(){var columnNumber=this.reader.ne
xtIdx-this.reader.s.substring(0,this.reader.nextIdx).lastIndexOf("\n");this.setColumnNumber(columnNumber);return this.getColumnNumberOld()};this.contentHandler.locator.getLineNumber=function(){var lineNumber=this.reader.s.substring(0,this.reader.nextIdx).split("\n").length;this.setLineNumber(lineNumber);return this.getLineNumberOld()}}saxEvents.warning=this.warning;saxEvents.error=this.error;saxEvents.fatalError=this.fatalError};SAXParser.prototype.setHandler=function(handler){this.contentHandler=handler;this.lexicalHandler=handler;this.errorHandler=handler;this.declarationHandler=handler;this.dtdHandler=handler;this.entityResolver=handler};SAXParser.prototype.setContentHandler=function(handler){this.contentHandler=handler};SAXParser.prototype.setDTDHandler=function(handler){this.dtdHandler=handler};SAXParser.prototype.setEntityResolver=function(resolver){this.entityResolver=resolver};SAXParser.prototype.setErrorHandler=function(handler){this.errorHandler=handler};SAXParser.prototype.
setFeature=function(name,value){if(this.features[name]===undefined){throw new SAXNotRecognizedException()}else{if((this.disallowedSetFeatureValues[name]!==undefined&&this.disallowedSetFeatureValues[name]===value)||(this.disallowedSetFeature.indexOf(name)!==-1)){throw new SAXNotSupportedException()}}this.features[name]=value};SAXParser.prototype.setProperty=function(name,value){if(this.properties[name]===undefined){throw new SAXNotRecognizedException()}else{if((this.disallowedSetPropertyValues[name]!==undefined&&this.disallowedSetPropertyValues[name]===value)||(this.disallowedSetProperty.indexOf(name)!==-1)){throw new SAXNotSupportedException()}}this.properties[name]=value;switch(name){case"http://xml.org/sax/properties/lexical-handler":this.lexicalHandler=value;break;case"http://xml.org/sax/p
roperties/declaration-handler":this.declarationHandler=value;break;case"http://xml.org/sax/properties/dom-node":this.domNode=value;break}};SAXParser.prototype.getAttributes2Instance=function(){return new Attributes2Impl()};SAXParser.prototype.getAttributes1Instance=function(){return new AttributesImpl()};SAXParser.prototype.startDocument_augmenting=function(){this.elements={};this.instanceContext=new Context("",[]);var datatypeLibrary=new DatatypeLibrary();this.debug=false;this.validatorFunctions=new ValidatorFunctions(this,datatypeLibrary);return this.parent.contentHandler.startDocument.call(this.parent.contentHandler)};SAXParser.prototype.startDTD_augmenting=function(name,publicId,systemId){this.pattern=this.elements[name]=new Element(new Name(null,name));this.context=new Context(publicId,[]);if(this.parent&&this.parent.lexicalHandler){return this.parent.lexicalHandler.startDTD.call(this.p
arent.lexicalHandler,name,publicId,systemId)}return undefined};SAXParser.getPatternFromMixed=function(model,xmlFilter){var pattern,mixed=/^\( ?#PCDATA ?(\|.*) ?\)\*$/.exec(model);if(mixed!==null){var elements=mixed[1].replace(/ /g,"");var splitOr=elements.split("|");for(var i=splitOr.length-1;i>0;i--){var elemName=splitOr[i];if(!xmlFilter.elements[elemName]){xmlFilter.elements[elemName]=new Element(new Name(null,elemName))}if(pattern){pattern=new Group(xmlFilter.elements[elemName],pattern)}else{pattern=xmlFilter.elements[elemName]}}return new Choice(new Empty(),new OneOrMore(new Choice(new Text(),pattern)))}return new Text()};var NAME_START_CHAR=":A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u0200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\ud800-\udbff\udc00-\udfff";var NAME_END_CHAR=".0-9\u00B7\u0300-\u036F\u203F-\u2040-";var parseModelRegexp=new RegExp("(["+NAME_START_CHAR+"]["+NAME_START_CHAR+NAME_END_CHAR+"]*)([*+?])? ?(
([,|])?(.*))?");SAXParser.getPatternFromChildren=function(model,xmlFilter){var brackets=/^\( ?(.*) ?\)([*+?]?)$/.exec(model);if(brackets!=null){var restOfModel=brackets[1];var operator=brackets[2];var pattern=SAXParser.getPatternFromChildren(restOfModel,xmlFilter);switch(operator){case"?":pattern=new Choice(pattern,new Empty());break;case"+":pattern=new OneOrMore(pattern);break;case"*":pattern=new Choice(new Empty(),new OneOrMore(pattern));break}return pattern}else{var parsedModel=parseModelRegexp.exec(model);var name=parsedModel[1];var operator=parsedModel[2];var separator=parsedModel[4];var restOfModel=parsedModel[5];if(!xmlFilter.elements[name]){xmlFilter.elements[name]=new Element(new Name(null,name))}var pattern;switch(operator){case"?":pattern=new Choice(xmlFilter.elements[name],new Empty());break;case"+":pattern=new OneOrMore(xmlFilter.elements[name]);break;case"*":pattern=new Choice(new Empty(),new OneOrMore(xmlFilter.elements[name]));break;default:pattern=xmlFilter.elements[n
ame];break}if(restOfModel){var pattern2=SAXParser.getPatternFromChildren(restOfModel,xmlFilter)}if(pattern2){if(separator==="|"){pattern=new Choice(pattern,pattern2)}else{pattern=new Group(pattern,pattern2)}}return pattern}};SAXParser.getPatternFromModel=function(model,xmlFilter){if(model==="EMPTY"){return new Empty()}else{if(model==="ANY"){return new Choice(new Empty(),new OneOrMore(new Element(new AnyName())))}else{var pattern;if(/^\( ?#PCDATA/.test(model)){pattern=SAXParser.getPatternFromMixed(model,xmlFilter)}else{pattern=SAXParser.getPatternFromChildren(model,xmlFilter)}return pattern}}};SAXParser.prototype.elementDecl_augmenting=function(name,model){var pattern=SAXParser.getPatternFromModel(model,this);var element=this.elements[name];if(!element){element=this.elements[name]=new Element(new Name(null,name),pattern)}else{if(element.pattern){if(pattern instanceof Text){element.pattern=new Interleave(element.pattern,pattern)}else{element.pattern=new Group(element.pattern,pattern)}}e
lse{element.pattern=pattern}}if(this.parent&&this.parent.declarationHandler){return this.parent.declarationHandler.elementDecl.call(this.parent.declarationHandler,name,model)}return undefined};SAXParser.attWhitespaceNormalize=function(value){value=value.replace(/\r\n/g," ");return value.replace(/[\t\n\r]/g," ")};SAXParser.attWhitespaceCollapse=function(type,value){if(type!=="string"){value=value.replace(/\s+/g," ");value=value.replace(/^\s/,"").replace(/\s$/,"")}return value};SAXParser.addAttributesIn=function(pattern,attributes){if(pattern){if(pattern instanceof Choice){SAXParser.addAttributesIn(pattern.pattern1,attributes);SAXParser.addAttributesIn(pattern.pattern2,attributes)}else{if(pattern instanceof Interleave){SAXParser.addAttributesIn(pattern.pattern1,attributes);SAXParser.addAttributesIn(pattern.pattern2,attributes)}else{if(pattern instanceof Group){SAXParser.addAttributesIn(pattern.pattern1,attributes);SAXParser.addAttributesIn(pattern.pattern2,attributes)}else{if(pa
ttern instanceof Attribute){attributes.push(pattern)}}}}}};SAXParser.augmentAttributes=function(elementNode,pattern){if(pattern){if(pattern instanceof Choice){SAXParser.augmentAttributes(elementNode,pattern.pattern1);SAXParser.augmentAttributes(elementNode,pattern.pattern2)}else{if(pattern instanceof Interleave){SAXParser.augmentAttributes(elementNode,pattern.pattern1);SAXParser.augmentAttributes(elementNode,pattern.pattern2)}else{if(pattern instanceof Group){SAXParser.augmentAttributes(elementNode,pattern.pattern1);SAXParser.augmentAttributes(elementNode,pattern.pattern2)}else{if(pattern instanceof Attribute){elementNode.addAttribute(pattern)}}}}}};SAXParser.isAlreadyDeclared=function(aName,attributes){for(var i=0;i<attributes.length;i++){var nameClass=attributes[i].nameClass;if(nameClass.localName&&nameClass.localName===aName){return true}}return false};SAXParser.prototype.attributeDecl_augmenting=function(eName,aName,type,mode,value){var element=this.elements[eName];var 
alreadyDeclaredAttributes=[];if(!element){element=this.elements[eName]=new Element(new Name(null,eName))}else{SAXParser.addAttributesIn(element.pattern,alreadyDeclaredAttributes)}if(SAXParser.isAlreadyDeclared(aName,alreadyDeclaredAttributes)){this.warning("attribute : ["+aName+"] under element : ["+eName+"] is already declared",this.parent.saxScanner)}else{var datatype;if(type==="NMTOKENS"||type==="NMTOKEN"){datatype=new Datatype("http://www.w3.org/2001/XMLSchema-datatypes",type)}else{datatype=new Datatype("http://www.w3.org/2001/XMLSchema-datatypes","string")}var paramList=[];if(/^\(.+\)$/.test(type)){var typeToParse=type.replace(/^\(/,"").replace(/\)$/,"");var values=typeToParse.split("|");var i=values.length;while(i--){paramList.push(new Param("enumeration",values[i]))}}var attributePattern=new Attribute(new N
ame(null,aName),new Data(datatype,paramList));attributePattern.index=alreadyDeclaredAttributes.length;if(mode!=="#REQUIRED"){if(value){var valueNormalized=SAXParser.attWhitespaceCollapse(type,value);attributePattern.defaultValue=new Value(datatype,valueNormalized,this.context)}attributePattern=new Choice(attributePattern,new Empty())}if(element.pattern){var group=new Group(element.pattern,attributePattern);element.pattern=group}else{element.pattern=attributePattern}}if(this.parent&&this.parent.declarationHandler){return this.parent.declarationHandler.attributeDecl.call(this.parent.declarationHandler,eName,aName,type,mode,value)}return undefined};SAXParser.prototype.augmenting_elm=function(namespaceURI,localName,qName,atts){var attributeNodes=[];for(var i=0;i<atts.getLength();i++){var newAtt=new AttributeNode(new QName(atts.getURI(i),atts.getLocalName(i)),atts.getValue(i));newAtt.atts=atts;newAtt.index=i;newAtt.attWhitespaceCollapse=this.attWhitespaceCollapse;newAtt.setType=
function(type){this.atts.setType(this.index,type);if(this.attWhitespaceCollapse){var oldValue=this.atts.getValue(this.index);var newValue=this.attWhitespaceCollapse(type,oldValue);this.atts.setValue(this.index,newValue)}if(this.atts.setDeclared){this.atts.setDeclared(this.index,true);this.atts.setSpecified(this.index,true)}};attributeNodes.push(newAtt)}var newElement=new ElementNode(new QName(namespaceURI,localName),this.instanceContext,attributeNodes,[]);newElement.atts=atts;newElement.addAttribute=function(pattern){var qName=pattern.nameClass;var type=null;if(pattern.pattern instanceof Data||pattern.pattern instanceof DataExcept){type=pattern.pattern.datatype.localName}var value=pattern.defaultValue.string;var index;if(pattern.index!==undefined&&this.atts.addAttributeAtIndex){index=pattern.index;this.atts.addAttributeAtIndex(pattern.index,qName.uri,qName.localName,qName.localName,type,value)}else{index=atts.getLength();this.atts.addAttribute(qName.uri,qName.localName,qName.l
ocalName,type,value)}if(atts.setDeclared){atts.setDeclared(index,true);atts.setSpecified(index,false)}this.attributeNodes.push(new AttributeNode(qName,value))};if(!this.childNode){this.childNode=this.currentElementNode=newElement}else{this.currentElementNode.childNodes.push(newElement);newElement.setParentNode(this.currentElementNode);this.currentElementNode=newElement}};SAXParser.prototype.startElement_augmenting=function(namespaceURI,localName,qName,atts){if(this.context){this.augmenting_elm(namespaceURI,localName,qName,atts);var pattern=this.elements[localName];if(pattern){SAXParser.augmentAttributes(this.currentElementNode,pattern.pattern)}}return this.parent.contentHandler.startElement.call(this.parent.contentHandler,namespaceURI,localName,qName,atts)};SAXParser.prototype.startElement_validating=function(namespaceURI,localName,qName,atts){if(this.context){this.augmenting_elm(namespaceURI,localName,qName,atts);this.resultPattern=this.validatorFunctions.childDeriv(this.context,this
.pattern,this.childNode);if(this.resultPattern instanceof NotAllowed&&!(this.resultPattern instanceof MissingContent)){var str="document not valid, message is : ["+this.resultPattern.message+"]";if(this.resultPattern.pattern){str+=", expected was : ["+this.resultPattern.pattern.toHTML()+"], found is : ["+this.resultPattern.childNode.toHTML()+"]"}this.warning(str)}}return this.parent.contentHandler.startElement.call(this.parent.contentHandler,namespaceURI,localName,qName,atts)};SAXParser.prototype.endElement_augmenting=function(namespaceURI,localName,qName){if(this.currentElementNode&&this.currentElementNode.parentNode){this.currentElementNode=this.currentElementNode.parentNode}return this.parent.contentHandler.endElement.call(this.parent.contentHandler,namespaceURI,localName,qName)};SAXParser.prototype.characters_augmenting=function(ch,start,length){if(this.context){var newText=new TextNode(ch);this.currentElementNode.childNodes.push(newText)}return this.parent.content
Handler.characters.call(this.parent.contentHandler,ch,start,length)};SAXParser.prototype.endDocument_validating=function(){if(this.pattern){this.resultPattern=this.validatorFunctions.childDeriv(this.context,this.pattern,this.childNode);if(this.resultPattern instanceof NotAllowed){var found=this.resultPattern.childNode;if(found.toHTML){found=found.toHTML()}throw new SAXException("document not valid, message is : ["+this.resultPattern.message+"], expected was : ["+this.resultPattern.pattern.toHTML()+"], found is : ["+found+"]")}}return this.parent.contentHandler.endDocument.call(this.parent.contentHandler)};SAXParser.loadFile=function(fname){var xmlhttp=null;if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest()}else{if(window.ActiveXObject){xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}}if(xmlhttp!==null){xmlhttp.open("GET",fname,false);xmlhttp.send(null);if(xmlhttp.readyState===4){return xmlhttp.responseText}}else{throw new SAXException("Your browser does not support XMLHTTP, the ext
ernal entity with URL : ["+fname+"] will not be resolved")}return false};SAXParser.prototype.resolveEntity=function(entityName,publicId,baseURI,systemId){var txt;if(baseURI){txt=SAXParser.loadFile(baseURI+systemId)}else{txt=SAXParser.loadFile(systemId)}if(txt){txt=txt.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return txt}return""};SAXParser.getSAXParseException=function(message,locator,saxScanner){var saxParseException=new SAXParseException(message,locator);return saxParseException};SAXParser.prototype.warning=function(message,saxScanner){var saxParseException=SAXParser.getSAXParseException(message,this.parent.contentHandler.locator,saxScanner);if(this.parent&&this.parent.errorHandler){this.parent.errorHandler.warning.call(this.parent.errorHandler,saxParseException)}};SAXParser.prototype.error=function(message,saxScanner){var saxParseException=SAXParser.getSAXParseException(message,this.parent.contentHandler.locator,saxScanner);if(this.parent&&this.parent.errorHandler){
this.parent.errorHandler.error.call(this.parent.errorHandler,saxParseException)}};SAXParser.prototype.fatalError=function(message,saxScanner){var saxParseException=SAXParser.getSAXParseException(message,this.parent.contentHandler.locator,saxScanner);if(this.parent&&this.parent.errorHandler){this.parent.errorHandler.fatalError.call(this.parent.errorHandler,saxParseException)}throw saxParseException};function XMLReaderFactory(){throw"XMLReaderFactory is not meant to be instantiated"}XMLReaderFactory.createXMLReader=function(className){if(className){return new that[className]()}return new SAXParser()};XMLReaderFactory.getSaxImport=function(){if(!that.saxImport){var scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){var script=scripts.item(i);var src=script.getAttribute("src");if(src&&src.match("sax.js")){that.saxImport=script;return that.saxImport}}}return that.saxImport};XMLReaderFactory.getJsPath=function(){if(that.jsPath===undefined){v
ar scriptTag=XMLReaderFactory.getSaxImport();if(scriptTag){var src=scriptTag.getAttribute("src");that.jsPath=src.substring(0,src.lastIndexOf("/")+1)}}return that.jsPath};XMLReaderFactory.importJS=function(filename){var scriptTag=XMLReaderFactory.getSaxImport();if(scriptTag!==undefined){var path=XMLReaderFactory.getJsPath();if(path!==undefined){var script=document.createElement("script");script.setAttribute("src",path+filename);script.setAttribute("type","text/javascript");scriptTag.parentNode.insertBefore(script,scriptTag)}else{throw new SAXException("could not get path of sax.js from the script markup")}}else{throw new SAXException("could not find script markup importing sax.js in the document")}};XMLReaderFactory.checkDependencies=function(){if(typeof that.SAXScanner!=="function"){try{this.importJS("SAXScanner.js")}catch(e){throw new SAXException("implementation of SAXScanner, like SAXScanner.js, not provided and could not be dynamically loaded because of exception",e)}}if(typeof th
at.AttributesImpl!=="function"){try{this.importJS("AttributesImpl.js")}catch(e2){throw new SAXException("implementation of Attributes, like AttributesImpl.js, not provided and could not be dynamically loaded because of exception",e2)}}if(typeof that.NamespaceSupport!=="function"){try{this.importJS("NamespaceSupport.js")}catch(e3){throw new SAXException("implementation of NamespaceSupport, like NamespaceSupport.js, not provided and could not be dynamically loaded because of exception",e3)}}if(typeof that.XMLFilterImpl!=="function"){try{this.importJS("XMLFilterImpls.js")}catch(e4){throw new SAXException("implementation of XMLFilterImpl, like XMLFilterImpls.js, not provided and could not be dynamically loaded because of exception",e4)}}if(typeof that.Reader!=="function"){try{this.importJS("Reader.js")}catch(e4){throw new SAXException("implementation of Reader, like Reader.js, not provided and could not be dynamically loaded because of exception",e5)}}if(typeof that.ReaderWrapper!=="funct
ion"){try{this.importJS("ReaderWrapper.js")}catch(e4){throw new SAXException("implementation of ReaderWrapper.js, like ReaderWrapper.js, not provided and could not be dynamically loaded because of exception",e6)}}};this.SAXParser=SAXParser;this.SAXException=SAXException;this.SAXNotSupportedException=SAXNotSupportedException;this.SAXNotRecognizedException=SAXNotRecognizedException;this.SAXParseException=SAXParseException;this.XMLReaderFactory=XMLReaderFactory;XMLReaderFactory.checkDependencies()}()); (function(){function DefaultHandler(){this.saxParseExceptions=[]}DefaultHandler.prototype.startDocument=function(){};DefaultHandler.prototype.startElement=function(namespaceURI,localName,qName,atts){};DefaultHandler.prototype.endElement=function(namespaceURI,localName,qName){};DefaultHandler.prototype.startPrefixMapping=function(prefix,uri){};DefaultHandler.prototype.endPrefixMapping=function(prefix){};DefaultHandler.prototype.processingInstruction=function(target,data){};DefaultHandler.pr
ototype.ignorableWhitespace=function(ch,start,length){};DefaultHandler.prototype.characters=function(ch,start,length){};DefaultHandler.prototype.skippedEntity=function(name){};DefaultHandler.prototype.endDocument=function(){};DefaultHandler.prototype.setDocumentLocator=function(locator){this.locator=locator};DefaultHandler.prototype.resolveEntity=function(publicId,systemId){return null};DefaultHandler.prototype.notationDecl=function(name,publicId,systemId){};DefaultHandler.prototype.unparsedEntityDecl=function(name,publicId,systemId,notationName){};DefaultHandler.prototype.warning=function(saxParseException){this.saxParseExceptions.push(saxParseException)};DefaultHandler.prototype.error=function(saxParseException){this.saxParseExceptions.push(saxParseException)};DefaultHandler.prototype.fatalError=function(saxParseException){throw saxParseException};function DefaultHandler2(){DefaultHandler.call(this)}DefaultHandler2.prototype=new DefaultHandler();DefaultHandler2.prototype.attributeDe
cl=function(eName,aName,type,mode,value){};DefaultHandler2.prototype.elementDecl=function(name,model){};DefaultHandler2.prototype.externalEntityDecl=function(name,publicId,systemId){};DefaultHandler2.prototype.internalEntityDecl=function(name,value){};DefaultHandler2.prototype.comment=function(ch,start,length){};DefaultHandler2.prototype.endCDATA=function(){};DefaultHandler2.prototype.endDTD=function(){};DefaultHandler2.prototype.endEntity=function(name){};DefaultHandler2.prototype.startCDATA=function(){};DefaultHandler2.prototype.startDTD=function(name,publicId,systemId){};DefaultHandler2.prototype.startEntity=function(name){};DefaultHandler2.prototype.resolveEntity=function(name,publicId,baseURI,systemId){};DefaultHandler2.prototype.getExternalSubset=function(name,baseURI){};this.DefaultHandler=DefaultHandler;this.DefaultHandler2=DefaultHandler2}());


